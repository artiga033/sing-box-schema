{
	"$schema": "https://json-schema.org/draft/2020-12/schema",
	"$id": "https://artiga033.github.io/sing-box-schema/inbound/tun.schema.json",
	"allOf": [
		{
			"properties": {
				"type": {
					"const": "tun"
				},
				"tag": {
					"type": "string",
					"description": "The tag of the inbound."
				},
				"interface_name": {
					"type": "string",
					"description": "Virtual device name, automatically selected if empty."
				},
				"address": {
					"$ref": "../types/string-or-array.schema.json",
					"description": "ðŸ†• Since sing-box 1.10.0\n\nIPv4 and IPv6 prefix for the tun interface."
				},
				"mtu": {
					"type": "integer",
					"description": "The maximum transmission unit."
				},
				"auto_route": {
					"type": "boolean",
					"description": "Set the default route to the Tun."
				},
				"iproute2_table_index": {
					"type": "integer",
					"default": 2022,
					"description": "ðŸ†• Since sing-box 1.10.0\n\nLinux iproute2 table index generated by `auto_route`."
				},
				"iproute2_rule_index": {
					"type": "integer",
					"default": 9000,
					"description": "ðŸ†• Since sing-box 1.10.0\n\nLinux iproute2 rule start index generated by `auto_route`."
				},
				"auto_redirect": {
					"type": "boolean",
					"description": "ðŸ†• Since sing-box 1.10.0\n\n> Only supported on Linux with `auto_route` enabled.\n\nImprove TUN routing and performance using nftables."
				},
				"auto_redirect_input_mark": {
					"oneOf": [
						{
							"type": "integer"
						},
						{
							"type": "string"
						}
					],
					"description": "ðŸ†• Since sing-box 1.10.0\n\nConnection input mark used by `auto_redirect`.\n\n`0x2023` is used by default."
				},
				"auto_redirect_output_mark": {
					"oneOf": [
						{
							"type": "integer"
						},
						{
							"type": "string"
						}
					],
					"description": "ðŸ†• Since sing-box 1.10.0\n\nConnection output mark used by `auto_redirect`.\n\n`0x2024` is used by default."
				},
				"auto_redirect_iproute2_fallback_rule_index": {
					"type": "integer",
					"default": 32768,
					"description": "ðŸ†• Since sing-box 1.12.18\n\nLinux iproute2 fallback rule index generated by `auto_redirect`."
				},
				"loopback_address": {
					"$ref": "../types/string-or-array.schema.json",
					"description": "ðŸ†• Since sing-box 1.12.0\n\nLoopback addresses make TCP connections to the specified address connect to the source address."
				},
				"strict_route": {
					"type": "boolean",
					"description": "Enforce strict routing rules when `auto_route` is enabled."
				},
				"route_address": {
					"$ref": "../types/string-or-array.schema.json",
					"description": "ðŸ†• Since sing-box 1.10.0\n\nUse custom routes instead of default when `auto_route` is enabled."
				},
				"route_exclude_address": {
					"$ref": "../types/string-or-array.schema.json",
					"description": "ðŸ†• Since sing-box 1.10.0\n\nExclude custom routes when `auto_route` is enabled."
				},
				"route_address_set": {
					"$ref": "../types/string-or-array.schema.json",
					"description": "ðŸ†• Since sing-box 1.10.0\n\nAdd the destination IP CIDR rules in the specified rule-sets to the firewall."
				},
				"route_exclude_address_set": {
					"$ref": "../types/string-or-array.schema.json",
					"description": "ðŸ†• Since sing-box 1.10.0\n\nAdd the destination IP CIDR rules in the specified rule-sets to the firewall for exclusion."
				},
				"endpoint_independent_nat": {
					"type": "boolean",
					"description": "Enable endpoint-independent NAT.\n\nOnly available on the gvisor stack."
				},
				"udp_timeout": {
					"type": "string",
					"default": "5m",
					"description": "UDP NAT expiration time.\n\n`5m` will be used by default."
				},
				"stack": {
					"type": "string",
					"enum": ["system", "gvisor", "mixed"],
					"description": "TCP/IP stack.\n\n- `system`: Perform L3 to L4 translation using the system network stack\n- `gvisor`: Perform L3 to L4 translation using gVisor's virtual network stack\n- `mixed`: Mixed `system` TCP stack and `gvisor` UDP stack"
				},
				"include_interface": {
					"$ref": "../types/string-or-array.schema.json",
					"description": "> Interface rules are only supported on Linux and require auto_route.\n\nLimit interfaces in route."
				},
				"exclude_interface": {
					"$ref": "../types/string-or-array.schema.json",
					"description": "Exclude interfaces in route."
				},
				"include_uid": {
					"oneOf": [
						{
							"type": "integer"
						},
						{
							"type": "array",
							"items": {
								"type": "integer"
							}
						}
					],
					"description": "> UID rules are only supported on Linux and require auto_route.\n\nLimit users in route."
				},
				"include_uid_range": {
					"$ref": "../types/string-or-array.schema.json",
					"description": "Limit users in route, but in range."
				},
				"exclude_uid": {
					"oneOf": [
						{
							"type": "integer"
						},
						{
							"type": "array",
							"items": {
								"type": "integer"
							}
						}
					],
					"description": "Exclude users in route."
				},
				"exclude_uid_range": {
					"$ref": "../types/string-or-array.schema.json",
					"description": "Exclude users in route, but in range."
				},
				"include_android_user": {
					"type": "array",
					"items": {
						"type": "integer"
					},
					"description": "> Android user and package rules are only supported on Android and require auto_route.\n\nLimit android users in route."
				},
				"include_package": {
					"$ref": "../types/string-or-array.schema.json",
					"description": "Limit android packages in route."
				},
				"exclude_package": {
					"$ref": "../types/string-or-array.schema.json",
					"description": "Exclude android packages in route."
				},
				"platform": {
					"type": "object",
					"properties": {
						"http_proxy": {
							"type": "object",
							"properties": {
								"enabled": {
									"type": "boolean",
									"description": "Enable system HTTP proxy."
								},
								"server": {
									"type": "string",
									"description": "HTTP proxy server address."
								},
								"server_port": {
									"type": "integer",
									"description": "HTTP proxy server port."
								},
								"bypass_domain": {
									"$ref": "../types/string-or-array.schema.json",
									"description": "Hostnames that bypass the HTTP proxy."
								},
								"match_domain": {
									"$ref": "../types/string-or-array.schema.json",
									"description": "> Only supported in graphical clients on Apple platforms.\n\nHostnames that use the HTTP proxy."
								}
							}
						}
					},
					"description": "Platform-specific settings, provided by client applications."
				},
				"gso": {
					"type": "boolean",
					"deprecated": true,
					"description": "Deprecated in sing-box 1.11.0."
				},
				"inet4_address": {
					"$ref": "../types/string-or-array.schema.json",
					"deprecated": true,
					"description": "Deprecated in sing-box 1.10.0. Use `address` instead."
				},
				"inet6_address": {
					"$ref": "../types/string-or-array.schema.json",
					"deprecated": true,
					"description": "Deprecated in sing-box 1.10.0. Use `address` instead."
				},
				"inet4_route_address": {
					"$ref": "../types/string-or-array.schema.json",
					"deprecated": true,
					"description": "Deprecated in sing-box 1.10.0. Use `route_address` instead."
				},
				"inet6_route_address": {
					"$ref": "../types/string-or-array.schema.json",
					"deprecated": true,
					"description": "Deprecated in sing-box 1.10.0. Use `route_address` instead."
				},
				"inet4_route_exclude_address": {
					"$ref": "../types/string-or-array.schema.json",
					"deprecated": true,
					"description": "Deprecated in sing-box 1.10.0. Use `route_exclude_address` instead."
				},
				"inet6_route_exclude_address": {
					"$ref": "../types/string-or-array.schema.json",
					"deprecated": true,
					"description": "Deprecated in sing-box 1.10.0. Use `route_exclude_address` instead."
				}
			},
			"required": ["type"]
		},
		{
			"$ref": "../shared/listen.schema.json"
		}
	]
}
