{
    "type": "object",
    "oneOf": [
        {
            "properties": {
                "server": {
                    "type": "string",
                    "description": "Tag of target server."
                },
                "strategy": {
                    "type": "string",
                    "enum": [
                        "prefer_ipv4",
                        "prefer_ipv6",
                        "ipv4_only",
                        "ipv6_only"
                    ],
                    "description": "ðŸ†• Since sing-box 1.12.0\n\nSet domain strategy for this query."
                },
                "disable_cache": {
                    "type": "boolean",
                    "description": "Disable cache and save cache in this query."
                },
                "rewrite_ttl": {
                    "type": "integer",
                    "description": "Rewrite TTL in DNS responses."
                },
                "client_subnet": {
                    "type": "string",
                    "description": "Append a `edns0-subnet` OPT extra record with the specified IP prefix to every query by default.\n\nIf value is an IP address instead of prefix, `/32` or `/128` will be appended automatically."
                }
            },
            "required": [
                "server"
            ],
            "if": {
                "properties": {
                    "action": {
                        "type": "string"
                    }
                },
                "required": [
                    "action"
                ]
            },
            "then": {
                "properties": {
                    "action": {
                        "const": "route"
                    }
                }
            }
        },
        {
            "properties": {
                "action": {
                    "const": "route-options"
                },
                "disable_cache": {
                    "type": "boolean",
                    "description": "Disable cache and save cache in this query."
                },
                "rewrite_ttl": {
                    "type": "integer",
                    "description": "Rewrite TTL in DNS responses."
                },
                "client_subnet": {
                    "type": "string",
                    "description": "Append a `edns0-subnet` OPT extra record with the specified IP prefix to every query by default."
                }
            },
            "required": [
                "action"
            ]
        },
        {
            "properties": {
                "action": {
                    "const": "reject"
                },
                "method": {
                    "type": "string",
                    "enum": [
                        "default",
                        "drop"
                    ],
                    "description": "Reject method.\n\n- `default`: Reply with REFUSED.\n- `drop`: Drop the request.\n\n`default` will be used by default."
                },
                "no_drop": {
                    "type": "boolean",
                    "description": "If not enabled, `method` will be temporarily overwritten to `drop` after 50 triggers in 30s.\n\nNot available when `method` is set to drop."
                }
            },
            "required": [
                "action"
            ]
        },
        {
            "properties": {
                "action": {
                    "const": "predefined"
                },
                "rcode": {
                    "type": "string",
                    "enum": [
                        "NOERROR",
                        "FORMERR",
                        "SERVFAIL",
                        "NXDOMAIN",
                        "NOTIMP",
                        "REFUSED"
                    ],
                    "description": "ðŸ†• Since sing-box 1.12.0\n\nThe response code.\n\n`NOERROR` will be used by default."
                },
                "answer": {
                    "type": "array",
                    "items": {
                        "type": "string"
                    },
                    "description": "List of text DNS record to respond as answers."
                },
                "ns": {
                    "type": "array",
                    "items": {
                        "type": "string"
                    },
                    "description": "List of text DNS record to respond as name servers."
                },
                "extra": {
                    "type": "array",
                    "items": {
                        "type": "string"
                    },
                    "description": "List of text DNS record to respond as extra records."
                }
            },
            "required": [
                "action"
            ]
        }
    ]
}