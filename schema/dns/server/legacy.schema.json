{
	"$schema": "https://json-schema.org/draft/2020-12/schema",
	"$id": "https://artiga033.github.io/sing-box-schema/dns/server/legacy.schema.json",
	"type": "object",
	"properties": {
		"type": {
			"type": "string",
			"const": ""
		},
		"address": {
			"type": "string",
			"pattern": "local|\\d{1,3}(\\.\\d{1,3}){3}|((tcp|udp|)://\\d{1,3}(\\.\\d{1,3}){3})|(tls|https|quic|h3)://([a-z0-9.-]+)(/.*)?|(rcode://(success|format_error|server_failure|name_error|not_implemented|refused))|dhcp://(auto|en\\d+)|fakeip",
			"description": "The address of the dns server."
		},
		"address_resolver": {
			"type": "string",
			"description": "Required if address contains domain.Tag of a another server to resolve the domain name in the address."
		},
		"address_strategy": {
			"type": "string",
			"description": "The domain strategy for resolving the domain name in the address.",
			"enum": ["prefer_ipv4", "prefer_ipv6", "ipv4_only", "ipv6_only"]
		},
		"strategy": {
			"type": "string",
			"description": "Default domain strategy for resolving the domain names.",
			"enum": ["prefer_ipv4", "prefer_ipv6", "ipv4_only", "ipv6_only"]
		},
		"detour": {
			"type": "string",
			"description": "Tag of an outbound for connecting to the dns server."
		},
		"client_subnet": {
			"type": "string",
			"description": "Append a `edns0-subnet` OPT extra record with the specified IP prefix to every query by default.\n\nIf value is an IP address instead of prefix, `/32` or `/128` will be appended automatically.\n\nCan be overrides by `rules.[].client_subnet`.\n\nWill overrides `dns.client_subnet`.",
			"pattern": "(\\d{1,3}(\\.\\d{1,3}){3}|([a-fA-F0-9:]+))(\\/\\d{1,3})?"
		}
	},
	"required": ["address"]
}
